import{_ as V,o as u,a as f,b as e,d as T,e as L,n as ne,f as M,g as U,U as _,h as oe,R as A,r as le,u as s,c as E,w as m,i as p,F as $,j as ae,k as re,l as y,m as ie,t as l,p as R,q as F,s as C,v as D,x as de,y as ce}from"./index-3efd29d9.js";import{H as i}from"./helpers-e3b30bc1.js";import{_ as ue,a as pe,b as me}from"./EmptyResourceComponent-c4bb86e1.js";import{_ as _e}from"./MyDropdownComponent-1207980f.js";import{u as fe}from"./user.store-588551b2.js";import{c as he,a as ve}from"./index.esm-3fd077bb.js";const Ce={},ye={class:"custom-select-form form"},be={class:"custom-select-type d-block"},Ae={class:"select-container"};function ge(B,c){return u(),f("div",ye,[e("div",be,[e("div",Ae,[T(B.$slots,"default",{},void 0,!0)])])])}const ke=V(Ce,[["render",ge],["__scopeId","data-v-558443c1"]]),He=["checked"],Ne={class:"option-label option-cards overflow-hidden text-nowrap"},Ue=L({__name:"MyFineOptionComponent",props:{selected:{type:Boolean},minWidth:{}},setup(B){return(c,g)=>(u(),f("div",{class:"custom-select-item",style:ne({minWidth:c.minWidth||"150px"})},[e("input",{type:"radio",checked:c.selected},null,8,He),e("label",Ne,[T(c.$slots,"default",{},void 0,!0)])],4))}});const Be=V(Ue,[["__scopeId","data-v-c244d577"]]),Ee={class:"row mt-4"},Re={class:"col-12"},we={class:"card"},Se={key:1,class:"card-body pt-0 px-0 text-nowrap"},Ie={class:"d-none"},Me=["onClick"],$e=["onClick"],Fe=["onClick"],De=["onClick"],Ve={class:"text-center"},Te={class:"text-center"},Le={class:"text-center"},xe={class:"text-center"},Oe={class:"w-100"},Pe={class:"text-center text-lower text-sharp mb-4 border-bottom border-2 pb-3"},je={class:"mb-3"},qe={class:"text-center"},We={class:"text-center"},ze={class:"text-center"},Ge={class:"text-center"},Ye={class:"mb-3"},Je={class:"error-message"},st=L({__name:"UsersManagementPage",setup(B){const c=fe(),g=M(()=>c.loaded),w=M(()=>c.users),a=U(),h=U(!1),k=U(!1),v=U(_.MAIN_BALANCE),H=t=>v.value=t,r=oe({status:A.INFO,title:"",message:"",onConfirm:()=>{}});g.value||c.fetchAll();const x=he({amount:ve().typeError("Amount is required").not([0],"Amount is not valid").required("Amount is required")}),O=t=>{a.value=t,a.value.status===C.ACTIVE?(r.status=A.INFO,r.title=`Do you really wants to unsuspend ${t.username}?`,r.message="To unsuspend this user will permit him to access this platform and perform regular task."):(r.status=A.WARNING,r.title=`Do you really wants to suspend ${t.username}?`,r.message="Suspending this user will prevent him from accessing this platform until he has been set active again."),r.onConfirm=W,h.value=!0},P=t=>{a.value=t,r.status=A.INFO,r.title=`Do you really wants to manually verify ${t.username} email address?`,r.message="Verifying this user email will permit him to access this platform and perform regular task.",r.onConfirm=z,h.value=!0},j=t=>{a.value=t,r.status=A.DANGER,r.title=`Do you really wants to delete ${t.username}?`,r.message="Deleting this user will remove all his/her entry from this platform complete including some of his/her activities",r.onConfirm=G,h.value=!0},q=t=>{a.value=t,k.value=!0},W=()=>{if(!a.value)return;h.value=!1;const t=a.value.status!==C.ACTIVE?C.ACTIVE:C.SUSPENDED;c.updateUserStatus(a.value._id,t)},z=()=>{a.value&&(h.value=!1,c.verifyEmail(a.value._id))},G=()=>{a.value&&(h.value=!1,c.deleteUser(a.value._id))},Y=t=>{a.value&&(k.value=!1,c.fundUserAccount(a.value._id,t))};return(t,n)=>{var I;const J=ue,K=me,Q=le("RouterLink"),X=_e,Z=pe,ee=ae,N=Be,te=ke,S=ce,se=re;return u(),f($,null,[e("div",Ee,[e("div",Re,[e("div",we,[n[13]||(n[13]=e("div",{class:"card-header"},[e("h4",{class:"card-title"},"Users Management")],-1)),s(g)&&!((I=s(w))!=null&&I.length)?(u(),E(J,{key:0},{default:m(()=>n[7]||(n[7]=[y(" No Users Found ")])),_:1})):(u(),f("div",Se,[s(g)?(u(),E(Z,{key:1,ordering:"",searching:"",order:[1,"asc"]},{default:m(()=>[n[12]||(n[12]=e("thead",{class:"bg-background"},[e("tr",null,[e("th",{class:"text-sharp d-none"},"Sort"),e("th",{class:"text-sharp"},"Action"),e("th",{class:"text-sharp"},"No"),e("th",{class:"text-sharp text-center"},"Status"),e("th",{class:"text-sharp"},"Name"),e("th",{class:"text-sharp"},"Username"),e("th",{class:"text-sharp"},"Email"),e("th",{class:"text-sharp"},"Country"),e("th",{class:"text-sharp"},"Main Bal"),e("th",{class:"text-sharp"},"Profit Bal"),e("th",{class:"text-sharp"},"Bonus Bal"),e("th",{class:"text-sharp"},"Referral Bal"),e("th",{class:"text-sharp text-center"},"Referral Code"),e("th",{class:"text-sharp text-center"},"Role"),e("th",{class:"text-sharp text-center"},"Verified"),e("th",{class:"text-sharp"},"Registered")])],-1)),e("tbody",null,[(u(!0),f($,null,ie(s(w),(o,b)=>(u(),f("tr",{key:o._id},[e("td",Ie,l(b+1),1),e("td",null,[p(X,null,{default:m(()=>[p(Q,{to:{name:"edit-user",params:{userId:o._id}},class:"dropdown-item border-bottom",href:"javascript:;"},{default:m(()=>n[8]||(n[8]=[e("i",{class:"bi bi-pencil-square me-2"},null,-1),y(" Manage")])),_:2},1032,["to"]),o.verified?R("",!0):(u(),f("a",{key:0,onClick:()=>P(o),class:"dropdown-item border-bottom",href:"javascript:;"},n[9]||(n[9]=[e("i",{class:"bi bi-check-circle me-2"},null,-1),y("Verify Email")]),8,Me)),e("a",{class:"dropdown-item border-bottom",href:"javascript:;",onClick:()=>q(o)},n[10]||(n[10]=[e("i",{class:"bi bi-cash me-2"},null,-1),y(" Credit / Debit")]),8,$e),o.role<("UserRole"in t?t.UserRole:s(F)).ADMIN||o.status!==s(C).ACTIVE?(u(),f("a",{key:1,class:"dropdown-item border-bottom",href:"javascript:;",onClick:()=>O(o)},[e("i",{class:D(`bi bi-${o.status===s(C).ACTIVE?"slash":"check"}-circle me-2`)},null,2),y(" "+l(o.status===s(C).ACTIVE?"Suspend":"Unsuspend"),1)],8,Fe)):R("",!0),o.role<("UserRole"in t?t.UserRole:s(F)).ADMIN?(u(),f("a",{key:2,onClick:()=>j(o),class:"dropdown-item",href:"javascript:;"},n[11]||(n[11]=[e("i",{class:"bi bi-trash me-2"},null,-1),y("Delete")]),8,De)):R("",!0)]),_:2},1024)]),e("td",null,l(b+1),1),e("td",Ve,[e("span",{class:D(`badge light badge-${("Helpers"in t?t.Helpers:s(i)).toStatus(o.status)}`)},l(("Helpers"in t?t.Helpers:s(i)).toTitleCase(o.status)),3)]),e("td",null,l(("Helpers"in t?t.Helpers:s(i)).toTitleCase(o.name)),1),e("td",null,l(o.username),1),e("td",null,l(o.email),1),e("td",null,l(("Helpers"in t?t.Helpers:s(i)).toTitleCase(o.country)),1),e("td",null,l(("Helpers"in t?t.Helpers:s(i)).toCurrency(o.mainBalance)),1),e("td",null,l(("Helpers"in t?t.Helpers:s(i)).toCurrency(o.profit)),1),e("td",null,l(("Helpers"in t?t.Helpers:s(i)).toCurrency(o.bonusBalance)),1),e("td",null,l(("Helpers"in t?t.Helpers:s(i)).toCurrency(o.referralBalance)),1),e("td",Te,l(o.refer),1),e("td",Le,l(("Helpers"in t?t.Helpers:s(i)).toUserRole(o.role)),1),e("td",xe,l(o.verified?"Yes":"No"),1),e("td",null,l(("Helpers"in t?t.Helpers:s(i)).toNiceDate(o.createdAt)),1)]))),128))])]),_:1})):(u(),E(K,{key:0,rows:8,cols:10,searching:""}))]))])])]),p(ee,{"is-open":s(h),status:s(r).status,title:s(r).title,message:s(r).message,onConfirm:s(r).onConfirm,onClose:n[0]||(n[0]=o=>h.value=!1)},null,8,["is-open","status","title","message","onConfirm"]),p(se,{"is-open":s(k),"validation-schema":s(x),onConfirm:Y,onClose:n[6]||(n[6]=()=>k.value=!1)},{default:m(({errors:o})=>{var b;return[e("div",Oe,[e("h2",Pe," Credit or debit: "+l((b=s(a))==null?void 0:b.username),1),e("div",je,[p(te,null,{default:m(()=>[p(N,{onClick:n[1]||(n[1]=()=>H(s(_).MAIN_BALANCE)),selected:s(v)===s(_).MAIN_BALANCE},{default:m(()=>{var d;return[n[14]||(n[14]=e("span",{class:"d-block"},"Main Balance",-1)),e("h4",qe,l(("Helpers"in t?t.Helpers:s(i)).toCurrency(((d=s(a))==null?void 0:d.mainBalance)||0)),1)]}),_:1},8,["selected"]),p(N,{onClick:n[2]||(n[2]=()=>H(s(_).PROFIT)),selected:s(v)===s(_).PROFIT},{default:m(()=>{var d;return[n[15]||(n[15]=e("span",{class:"d-block"},"Profit",-1)),e("h4",We,l(("Helpers"in t?t.Helpers:s(i)).toCurrency(((d=s(a))==null?void 0:d.profit)||0)),1)]}),_:1},8,["selected"]),p(N,{selected:s(v)===s(_).BONUS_BALANCE,onClick:n[3]||(n[3]=()=>H(s(_).BONUS_BALANCE))},{default:m(()=>{var d;return[n[16]||(n[16]=e("span",{class:"d-block"},"Bonus Balance",-1)),e("h4",ze,l(("Helpers"in t?t.Helpers:s(i)).toCurrency(((d=s(a))==null?void 0:d.bonusBalance)||0)),1)]}),_:1},8,["selected"]),p(N,{selected:s(v)===s(_).REFERRAL_BALANCE,onClick:n[4]||(n[4]=()=>H(s(_).REFERRAL_BALANCE))},{default:m(()=>{var d;return[n[17]||(n[17]=e("span",{class:"d-block"},"Referral Balance",-1)),e("h4",Ge,l(("Helpers"in t?t.Helpers:s(i)).toCurrency(((d=s(a))==null?void 0:d.referralBalance)||0)),1)]}),_:1},8,["selected"])]),_:1}),p(S,{name:"account",modelValue:s(v),"onUpdate:modelValue":n[5]||(n[5]=d=>de(v)?v.value=d:null),type:"hidden"},null,8,["modelValue"])]),e("div",Ye,[n[18]||(n[18]=e("label",{class:"form-label text-sharp text-center w-100"},"Amount (add minus to debit)",-1)),p(S,{name:"amount",type:"number",placeholder:"Amount",class:"form-control","validate-on-input":!0}),e("span",Je,l(o.amount),1)])])]}),_:1},8,["is-open","validation-schema"])],64)}}});export{st as default};

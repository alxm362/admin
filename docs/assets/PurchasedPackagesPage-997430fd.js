import{e as F,f as m,r as B,o as v,a as S,b as e,t as u,v as C,u as s,l as L,F as M,m as O,i as H,w as j,p as A,d as V,N as K,B as W,A as z,g as T,O as R,h as q,R as U,G as J,j as Q,c as G}from"./index-3efd29d9.js";import{H as _}from"./helpers-e3b30bc1.js";import{_ as X}from"./PackagePlansPage.vue_vue_type_script_setup_true_lang-eaa77031.js";import"./index.esm-3fd077bb.js";var a=(i=>(i.RUNNING="running",i.SUSPENDED="suspended",i.MARKET_OPENED="market opened",i.MARKET_CLOSED="market closed",i.TRADE_ON_HOLD="trade on hold",i.INSUFFICIENT_GAS="insufficient gas",i.COMPLETED="completed",i))(a||{});const Y={class:"col-xl-4 col-lg-6 col-sm-12"},Z={class:"card"},x={class:"card-header border-0 pb-0 justify-content-start align-items-stretch gap-2"},tt={class:"d-flex flex-column justify-content-between"},et={class:"card-title fw-bold"},st={class:"d-flex gap-2 align-items-center"},nt={class:"mb-0"},at={class:"card-header border-0 pb-0 pt-0 justify-content-start align-items-stretch gap-2"},ot={class:"d-flex flex-column justify-content-between"},it={class:"card-title fw-bold"},lt={class:"d-flex gap-2 align-items-center"},rt={class:"mb-0"},dt={class:"card-body pt-0"},ut={class:"text-white mb-2 d-flex gap-2 align-items-center"},mt={class:"ms-3 fs-5 avatar-group1"},vt=["src","alt"],ct={class:"text-white mb-2"},pt={class:"ms-3 fw-bold text-primary fs-5"},ft={class:"text-white mb-2"},St={class:"text-center mb-0"},bt={class:"d-flex gap-2 mt-2"},ht={key:0,class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},gt=["disabled"],It={class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},wt=["disabled"],Et={class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},Pt=["disabled"],Nt={key:1,class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},Dt=["disabled"],yt=F({__name:"PurchasedPackageCardComponent",props:{investment:{}},setup(i){const r=i,p=m(()=>{var t;return(((t=r.investment.plan)==null?void 0:t.potentialPercentageProfit)||250)*r.investment.amount/100}),D=m(()=>r.investment.runTime+(r.investment.status===a.RUNNING?new Date().getTime()-new Date(r.investment.resumeTime).getTime():0)),w=m(()=>p.value*D.value/r.investment.expectedRunTime+r.investment.extraProfit),f=m(()=>r.investment.expectedRunTime-D.value),b=m(()=>Math.floor(f.value/(1e3*60*60*24))),E=m(()=>Math.floor(f.value%(1e3*60*60*24)/(1e3*60*60))),y=m(()=>Math.floor(f.value%(1e3*60*60)/(1e3*60))),k=m(()=>Math.floor(f.value%(1e3*60)/1e3));return(t,n)=>{var h,g,$,o;const d=B("vue-countdown");return v(),S("div",Y,[e("div",Z,[e("div",x,[e("div",tt,[e("h2",et,u(((h=t.investment.user)==null?void 0:h.name)||"Unknown"),1),e("div",st,[e("p",nt,"@"+u(((g=t.investment.user)==null?void 0:g.username)||"Unknown"),1)])])]),n[7]||(n[7]=e("hr",{class:"mt-2"},null,-1)),e("div",at,[e("div",ot,[e("h2",it,u((($=t.investment.plan)==null?void 0:$.name)||"Unknown"),1),e("div",lt,[e("p",rt,u(((o=t.investment.plan)==null?void 0:o.engine)||"Unknown"),1),e("span",{class:C(`badge light badge-${("Helpers"in t?t.Helpers:s(_)).toStatus(t.investment.status)}`)},u(("Helpers"in t?t.Helpers:s(_)).toTitleCase(t.investment.status)),3)])])]),n[8]||(n[8]=e("hr",{class:"mt-2"},null,-1)),e("div",dt,[e("ul",null,[e("li",ut,[n[0]||(n[0]=L(" Assets: ")),e("div",mt,[(v(!0),S(M,null,O(t.investment.assets.slice().reverse(),l=>(v(),S("a",{key:l._id,class:"avatar-group-item1",href:"javascript: void(0);"},[e("img",{src:`/icons/crypto-svg/${l.logo}`,class:"",alt:`${l.name}`,width:"24"},null,8,vt)]))),128))])]),e("li",ct,[n[1]||(n[1]=L(" Amount Invested: ")),e("span",pt,u(("Helpers"in t?t.Helpers:s(_)).toCurrency(t.investment.amount)),1)]),e("li",ft,[L(u(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).COMPLETED?"Profit Received":"Earnings")+": ",1),e("span",{class:C(`ms-3 fw-bold ${t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).SUSPENDED?"text-warning":"text-success"}  fs-5`)},u(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).COMPLETED?("Helpers"in t?t.Helpers:s(_)).toCurrency(s(p)+t.investment.extraProfit):("Helpers"in t?t.Helpers:s(_)).toCurrency(s(w))),3)])]),n[6]||(n[6]=e("hr",{class:"mt-3 mb-2"},null,-1)),e("p",St,u(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).COMPLETED?"Investment Completed":t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).SUSPENDED?"Investment suspended, contact support for more information":"This Investment Will Complete In"),1),H(d,{time:s(f)},{default:j(({days:l,hours:P,minutes:I,seconds:N})=>[e("div",bt,[l?(v(),S("div",ht,[e("button",{disabled:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).SUSPENDED,class:C(`btn light ${t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Days"},u(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).RUNNING?s(b):t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).COMPLETED?0:l),11,gt),n[2]||(n[2]=e("span",{class:"fw-bold"},"Days",-1))])):A("",!0),e("div",It,[e("button",{disabled:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).SUSPENDED,class:C(`btn light ${t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Hours"},u(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).RUNNING?P:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).COMPLETED?0:s(E)),11,wt),n[3]||(n[3]=e("span",{class:"fw-bold"},"Hours",-1))]),e("div",Et,[e("button",{disabled:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).SUSPENDED,class:C(`btn light ${t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Minutes"},u(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).RUNNING?I:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).COMPLETED?0:s(y)),11,Pt),n[4]||(n[4]=e("span",{class:"fw-bold"},"Minutes",-1))]),l?A("",!0):(v(),S("div",Nt,[e("button",{disabled:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).SUSPENDED,class:C(`btn light ${t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Seconds"},u(t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).RUNNING?N:t.investment.status===("InvestmentStatus"in t?t.InvestmentStatus:s(a)).COMPLETED?0:s(k)),11,Dt),n[5]||(n[5]=e("span",{class:"fw-bold"},"Seconds",-1))]))])]),_:1},8,["time"]),V(t.$slots,"default")])])])}}});const Ct=K("investment",()=>{const i=W();z();const r="investment",p=T([]),D=T(!1);function w(t){p.value=t}function f(t){D.value=t}function b(t,n){const d=p.value;if(!d)return;const h=d.findIndex(g=>g._id===t);d[h]=n,w(d)}async function E(){f(!1);try{const t=await R.get(`master/${r}`);w(t.data.data.investments)}catch(t){console.error(t),i.handlePost(t.response)}f(!0)}async function y(t){try{i.setPost(!0);const n=await R.patch(`master/${r}/update-status/${t.investmentId}`,t);b(t.investmentId,n.data.data.investment),i.handlePost(n)}catch(n){console.error(n),i.handlePost(n.response)}}async function k(t){try{i.setPost(!0);const n=await R.delete(`master/${r}/delete/${t}`),d=p.value;if(!d)return;const h=d.filter(g=>g._id!==t);return w(h),i.handlePost(n),!0}catch(n){return console.error(n),i.handlePost(n.response),!1}}return{loaded:D,investments:p,updateStatus:y,deleteInvestment:k,fetchAll:E}}),kt={class:"custom-tab-1"},$t={class:"tab-content"},Ut={id:"available-packages",class:"tab-pane fade active show"},_t={id:"running-packages",class:"tab-pane fade"},Tt={class:"row"},Mt={class:"dropdown-menu"},At=["onClick"],Lt=["onClick"],Rt=["onClick"],Ot={id:"closed-packages",class:"tab-pane fade"},Ht={class:"row"},jt={class:"dropdown-menu"},Gt=["onClick"],Wt=F({__name:"PurchasedPackagesPage",setup(i){const r=Ct(),p=m(()=>r.investments);m(()=>r.loaded).value||r.fetchAll();const w=m(()=>p.value.filter(o=>o.status!==a.COMPLETED)),f=m(()=>p.value.filter(o=>o.status===a.COMPLETED)),b=T(),E=T(),y=o=>b.value=o,k=o=>E.value=o,t=T(!1),n=o=>t.value=o,d=q({status:U.INFO,title:"",message:"",onConfirm:()=>{}}),h=o=>{d.status=o.status,d.title=o.title,d.message=o.message,d.onConfirm=o.onConfirm},g=o=>{y(o),h({status:U.DANGER,title:"Do you really wants to delete this plan",message:"Please note that this action cannot be reversed",onConfirm:async()=>{b.value&&(await r.deleteInvestment(b.value._id),n(!1))}}),n(!0)},$=(o,l)=>{y(o),k(l);let P=U.INFO,I="",N="";switch(l){case a.RUNNING:P=U.INFO,I="Do you really wants to make this miner active?",N="";break;case a.SUSPENDED:P=U.WARNING,I="Do you really wants to suspend this miner?",N="";break}h({status:P,title:I,message:N,onConfirm:async()=>{!b.value||!E.value||(await r.updateStatus({investmentId:b.value._id,status:E.value}),n(!1))}}),n(!0)};return(o,l)=>{const P=X,I=yt,N=Q;return v(),S(M,null,[e("div",kt,[l[3]||(l[3]=J('<ul class="nav nav-tabs border-2 d-flex text-nowrap mb-4"><li class="nav-item"><a href="#available-packages" data-bs-toggle="tab" class="nav-link show active rounded-top m-0 text-center" style="border:none;">Available</a></li><li class="nav-item"><a href="#running-packages" data-bs-toggle="tab" class="nav-link rounded-top m-0 text-center" style="border:none;">Active</a></li><li class="nav-item"><a href="#closed-packages" data-bs-toggle="tab" class="nav-link rounded-top m-0 text-center" style="border:none;">Completed</a></li></ul>',1)),e("div",$t,[e("div",Ut,[H(P)]),e("div",_t,[e("div",Tt,[(v(!0),S(M,null,O(s(w),c=>(v(),G(I,{investment:c,key:c._id},{default:j(()=>[l[1]||(l[1]=e("button",{type:"button",class:"btn btn-outline-secondary w-100 mt-3 dropdown-toggle","data-bs-toggle":"dropdown"}," Action ",-1)),e("div",Mt,[c.status!==s(a).RUNNING?(v(),S("a",{key:0,class:"dropdown-item",href:"javascript:void(0)",onClick:()=>$(c,s(a).RUNNING)},"Active",8,At)):A("",!0),c.status!==s(a).SUSPENDED?(v(),S("a",{key:1,class:"dropdown-item",href:"javascript:void(0)",onClick:()=>$(c,s(a).SUSPENDED)},"Suspend",8,Lt)):A("",!0),e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:()=>g(c)},"Delete",8,Rt)])]),_:2},1032,["investment"]))),128))])]),e("div",Ot,[e("div",Ht,[(v(!0),S(M,null,O(s(f),c=>(v(),G(I,{investment:c,key:c._id},{default:j(()=>[l[2]||(l[2]=e("button",{type:"button",class:"btn btn-outline-secondary w-100 mt-3 dropdown-toggle","data-bs-toggle":"dropdown"}," Action ",-1)),e("div",jt,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:()=>g(c)},"Delete",8,Gt)])]),_:2},1032,["investment"]))),128))])])])]),H(N,{"is-open":s(t),status:s(d).status,title:s(d).title,message:s(d).message,onConfirm:s(d).onConfirm,onClose:l[0]||(l[0]=()=>n(!1))},null,8,["is-open","status","title","message","onConfirm"])],64)}}});export{Wt as default};

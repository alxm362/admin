import{b as d,H as c}from"./helpers-e3b30bc1.js";import{N as se,B as ae,g as G,O as U,e as ie,f as O,h as de,R as M,a as u,b as e,G as ce,u as s,c as y,w as v,i as L,F as R,j as ue,o,l as b,m as z,t as r,v as k,p as C}from"./index-3efd29d9.js";import{_ as pe,a as he,b as me}from"./EmptyResourceComponent-c4bb86e1.js";import{_ as fe}from"./MyDropdownComponent-1207980f.js";import{u as le}from"./user.store-588551b2.js";import{O as K}from"./otherWithdrawalMethod.enum-d7b5a2af.js";const be=se("otherWithdrawal",()=>{const f=ae(),P=le(),m="/other-withdrawal",g=G([]),N=G(!1);function _(n){g.value=n}function A(n){N.value=n}function $(n,h){const i=g.value;if(!i)return;const D=i.findIndex(p=>p._id===n);i[D]=h,_(i)}async function W(){A(!1);try{const n=await U.get(`/master${m}`);_(n.data.data.otherWithdrawals)}catch(n){console.error(n),f.handlePost(n.response)}A(!0)}async function S(n,h){try{f.setPost(!0);const i=await U.patch(`/master${m}/update-status/${n}`,{status:h});$(n,i.data.data.otherWithdrawal),P.fetchAll(),f.handlePost(i)}catch(i){console.error(i),f.handlePost(i.response)}}async function x(n){try{f.setPost(!0);const h=await U.delete(`/master${m}/delete/${n}`),i=g.value;if(!i)return;const D=i.filter(p=>p._id!==n);_(D),f.handlePost(h)}catch(h){console.error(h),f.handlePost(h.response)}}return{loaded:N,otherWithdrawals:g,fetchAll:W,updateStatus:S,deleteOne:x}}),ye=se("withdrawal",()=>{const f=ae(),P=le(),m="withdrawal",g=G([]),N=G(!1);function _(n){g.value=n}function A(n){N.value=n}function $(n,h){const i=g.value;if(!i)return;const D=i.findIndex(p=>p._id===n);i[D]=h,_(i)}async function W(){A(!1);try{const n=await U.get(`master/${m}`);_(n.data.data.withdrawals)}catch(n){console.error(n),f.handlePost(n.response)}A(!0)}async function S(n,h){try{f.setPost(!0);const i=await U.patch(`master/${m}/update-status/${n}`,{status:h});$(n,i.data.data.withdrawal),P.fetchAll(),f.handlePost(i)}catch(i){console.error(i),f.handlePost(i.response)}}async function x(n){try{f.setPost(!0);const h=await U.delete(`master/${m}/delete/${n}`),i=g.value;if(!i)return;const D=i.filter(p=>p._id!==n);_(D),f.handlePost(h)}catch(h){console.error(h),f.handlePost(h.response)}}return{loaded:N,withdrawals:g,fetchAll:W,updateStatus:S,deleteOne:x}}),ve={class:"row mt-4"},ke={class:"col-12"},Ce={class:"custom-tab-1"},ge={class:"tab-content"},Ne={id:"crypto",class:"tab-pane fade active show"},Ae={class:"card"},He={key:1,class:"card-body pt-0 px-0"},Pe={class:"d-none"},De=["onClick"],_e=["onClick"],Se=["onClick"],Ee={class:"text-center"},We={class:"d-flex"},xe=["src","alt"],Ie={class:"d-flex flex-column"},Oe={class:"fw-bold"},Ge={class:"fs-14"},$e={id:"bank",class:"tab-pane fade"},Ue={class:"card"},Le={key:1,class:"card-body pt-0 px-0"},Re={class:"d-none"},Te=["onClick"],je=["onClick"],Be=["onClick"],Ve={class:"text-center"},Fe={id:"paypal",class:"tab-pane fade"},Me={class:"card"},ze={key:1,class:"card-body pt-0 px-0"},Ke={class:"d-none"},Ye=["onClick"],qe=["onClick"],Je=["onClick"],Qe={class:"text-center"},Xe={id:"cashApp",class:"tab-pane fade"},Ze={class:"card"},we={key:1,class:"card-body pt-0 px-0"},et={class:"d-none"},tt=["onClick"],st=["onClick"],at=["onClick"],lt={class:"text-center"},ut=ie({__name:"WithdrawPage",setup(f){const P=G(!1),m=G(),g=a=>m.value=a,N=G(),_=a=>N.value=a,A=ye(),$=O(()=>A.withdrawals),W=O(()=>A.loaded);W.value||A.fetchAll();const S=be(),x=O(()=>S.otherWithdrawals),n=O(()=>S.loaded);n.value||S.fetchAll();const h=O(()=>x.value.filter(a=>a.type===K.BANK)),i=O(()=>x.value.filter(a=>a.type===K.PAYPAL)),D=O(()=>x.value.filter(a=>a.type===K.CASH_APP)),p=de({status:M.INFO,title:"",message:"",onConfirm:()=>{}}),E=(a,l)=>{g(a),_(l),l===d.APPROVED?(p.status=M.INFO,p.title="Do you really wants to approve this withdrawal?",p.message="Approving cannot be reversed."):(p.status=M.WARNING,p.title="Do you really wants to cancel this withdrawal?",p.message=`Canceling this withdrawal mark it has ${l} whereby the user will be credited back on his/her account`),p.onConfirm=ne,P.value=!0},T=a=>{m.value=a,p.status=M.DANGER,p.title="Do you really wants to delete this withdrawal?",p.message="Deleting this withdrawal can not be reversed",p.onConfirm=oe,P.value=!0},ne=()=>{m.value&&(N.value!==d.APPROVED&&N.value!==d.CANCELLED||(P.value=!1,m.value.type?S.updateStatus(m.value._id,N.value):A.updateStatus(m.value._id,N.value)))},oe=()=>{m.value&&(P.value=!1,m.value.type?S.deleteOne(m.value._id):A.deleteOne(m.value._id))};return(a,l)=>{var Y,q,J,Q;const j=pe,B=me,V=fe,F=he,re=ue;return o(),u(R,null,[e("div",ve,[e("div",ke,[e("div",Ce,[l[25]||(l[25]=ce('<ul class="nav nav-tabs border-2 d-flex text-nowrap mb-4"><li class="nav-item"><a href="#crypto" data-bs-toggle="tab" class="nav-link show active rounded-top m-0 text-center" style="border:none;">Crypto</a></li><li class="nav-item"><a href="#bank" data-bs-toggle="tab" class="nav-link rounded-top m-0 text-center" style="border:none;">Bank</a></li><li class="nav-item"><a href="#paypal" data-bs-toggle="tab" class="nav-link rounded-top m-0 text-center" style="border:none;">PayPal</a></li><li class="nav-item"><a href="#cashApp" data-bs-toggle="tab" class="nav-link rounded-top m-0 text-center" style="border:none;">CashApp</a></li></ul>',1)),e("div",ge,[e("div",Ne,[e("div",Ae,[l[6]||(l[6]=e("div",{class:"card-header"},[e("h4",{class:"card-title"},"Users Withdrawals")],-1)),s(W)&&!((Y=s($))!=null&&Y.length)?(o(),y(j,{key:0},{default:v(()=>l[1]||(l[1]=[b(" No Withdrawal Record Found ")])),_:1})):(o(),u("div",He,[s(W)?(o(),y(F,{key:1,ordering:"",searching:""},{default:v(()=>[l[5]||(l[5]=e("thead",{class:"bg-background"},[e("tr",null,[e("th",{class:"text-sharp d-none"},"Sort"),e("th",{class:"text-sharp text-center"},"Action"),e("th",{class:"text-sharp text-center"},"Status"),e("th",{class:"text-sharp"},"User"),e("th",{class:"text-sharp"},"Amount"),e("th",{class:"text-sharp"},"Currency"),e("th",{class:"text-sharp"},"Network"),e("th",{class:"text-sharp"},"User's Wallet Address"),e("th",{class:"text-sharp"},"Created"),e("th",{class:"text-sharp"},"Settled")])],-1)),e("tbody",null,[(o(!0),u(R,null,z(s($),(t,I)=>{var H,X,Z,w,ee,te;return o(),u("tr",{key:t._id},[e("td",Pe,r(I+1),1),e("td",null,[L(V,null,{default:v(()=>[t.status===s(d).PENDING?(o(),u("a",{key:0,onClick:()=>E(t,s(d).APPROVED),class:"dropdown-item border-bottom",href:"javascript:;"},l[2]||(l[2]=[e("i",{class:k("bi bi-check-circle me-2")},null,-1),b("Approve")]),8,De)):C("",!0),t.status===s(d).PENDING?(o(),u("a",{key:1,onClick:()=>E(t,s(d).CANCELLED),class:"dropdown-item",href:"javascript:;"},l[3]||(l[3]=[e("i",{class:k("bi bi-slash-circle me-2")},null,-1),b("Cancel")]),8,_e)):C("",!0),t.status!==s(d).PENDING?(o(),u("a",{key:2,onClick:()=>T(t),class:"dropdown-item",href:"javascript:;"},l[4]||(l[4]=[e("i",{class:"bi bi-trash me-2"},null,-1),b("Delete")]),8,Se)):C("",!0)]),_:2},1024)]),e("td",Ee,[e("span",{class:k(`badge light badge-${("Helpers"in a?a.Helpers:s(c)).toStatus(t.status)}`)},r(("Helpers"in a?a.Helpers:s(c)).toTitleCase(t.status)),3)]),e("td",null,r(("Helpers"in a?a.Helpers:s(c)).toTitleCase(((H=t.user)==null?void 0:H.username)||"Unknown")),1),e("td",null,r(("Helpers"in a?a.Helpers:s(c)).toCurrency(t.amount)),1),e("td",null,[e("div",We,[e("img",{src:`/icons/crypto-svg/${(X=t.currency)==null?void 0:X.logo}`,class:"me-3",alt:(Z=t.currency)==null?void 0:Z.name,width:"24"},null,8,xe),e("div",Ie,[e("span",Oe,r(("Helpers"in a?a.Helpers:s(c)).toTitleCase(((w=t.currency)==null?void 0:w.name)||"Unknown")),1),e("span",Ge,r((ee=t.currency)==null?void 0:ee.symbol.toUpperCase()),1)])])]),e("td",null,r((te=t.withdrawalMethod)==null?void 0:te.network.toUpperCase()),1),e("td",null,r(t.address),1),e("td",null,r(("Helpers"in a?a.Helpers:s(c)).toNiceDate(t.createdAt)),1),e("td",null,r(t.status===s(d).PENDING?"--":("Helpers"in a?a.Helpers:s(c)).toNiceDate(t.updatedAt)),1)])}),128))])]),_:1})):(o(),y(B,{key:0,rows:8,cols:6,searching:""}))]))])]),e("div",$e,[e("div",Ue,[l[12]||(l[12]=e("div",{class:"card-header"},[e("h4",{class:"card-title"},"Users Withdrawals")],-1)),s(n)&&!((q=s(h))!=null&&q.length)?(o(),y(j,{key:0},{default:v(()=>l[7]||(l[7]=[b(" No Withdrawal Record Found ")])),_:1})):(o(),u("div",Le,[s(n)?(o(),y(F,{key:1,ordering:"",searching:""},{default:v(()=>[l[11]||(l[11]=e("thead",{class:"bg-background"},[e("tr",null,[e("th",{class:"text-sharp d-none"},"Sort"),e("th",{class:"text-sharp text-center"},"Action"),e("th",{class:"text-sharp text-center"},"Status"),e("th",{class:"text-sharp"},"User"),e("th",{class:"text-sharp"},"Amount"),e("th",{class:"text-sharp"},"Bank Name"),e("th",{class:"text-sharp"},"Bank's Routing Number"),e("th",{class:"text-sharp"},"Bank's Swift Code"),e("th",{class:"text-sharp"},"Account Number"),e("th",{class:"text-sharp"},"Account Name"),e("th",{class:"text-sharp"},"Created"),e("th",{class:"text-sharp"},"Settled")])],-1)),e("tbody",null,[(o(!0),u(R,null,z(s(h),(t,I)=>{var H;return o(),u("tr",{key:t._id},[e("td",Re,r(I+1),1),e("td",null,[L(V,null,{default:v(()=>[t.status===s(d).PENDING?(o(),u("a",{key:0,onClick:()=>E(t,s(d).APPROVED),class:"dropdown-item border-bottom",href:"javascript:;"},l[8]||(l[8]=[e("i",{class:k("bi bi-check-circle me-2")},null,-1),b("Approve")]),8,Te)):C("",!0),t.status===s(d).PENDING?(o(),u("a",{key:1,onClick:()=>E(t,s(d).CANCELLED),class:"dropdown-item",href:"javascript:;"},l[9]||(l[9]=[e("i",{class:k("bi bi-slash-circle me-2")},null,-1),b("Cancel")]),8,je)):C("",!0),t.status!==s(d).PENDING?(o(),u("a",{key:2,onClick:()=>T(t),class:"dropdown-item",href:"javascript:;"},l[10]||(l[10]=[e("i",{class:"bi bi-trash me-2"},null,-1),b("Delete")]),8,Be)):C("",!0)]),_:2},1024)]),e("td",Ve,[e("span",{class:k(`badge light badge-${("Helpers"in a?a.Helpers:s(c)).toStatus(t.status)}`)},r(("Helpers"in a?a.Helpers:s(c)).toTitleCase(t.status)),3)]),e("td",null,r(("Helpers"in a?a.Helpers:s(c)).toTitleCase(((H=t.user)==null?void 0:H.username)||"Unknown")),1),e("td",null,r(("Helpers"in a?a.Helpers:s(c)).toCurrency(t.amount)),1),e("td",null,r(t.bankName),1),e("td",null,r(t.routingNumber),1),e("td",null,r(t.swiftCode),1),e("td",null,r(t.accountNumber),1),e("td",null,r(t.accountName),1),e("td",null,r(("Helpers"in a?a.Helpers:s(c)).toNiceDate(t.createdAt)),1),e("td",null,r(t.status===s(d).PENDING?"--":("Helpers"in a?a.Helpers:s(c)).toNiceDate(t.updatedAt)),1)])}),128))])]),_:1})):(o(),y(B,{key:0,rows:8,cols:6,searching:""}))]))])]),e("div",Fe,[e("div",Me,[l[18]||(l[18]=e("div",{class:"card-header"},[e("h4",{class:"card-title"},"Users Withdrawals")],-1)),s(n)&&!((J=s(i))!=null&&J.length)?(o(),y(j,{key:0},{default:v(()=>l[13]||(l[13]=[b(" No Withdrawal Record Found ")])),_:1})):(o(),u("div",ze,[s(n)?(o(),y(F,{key:1,ordering:"",searching:""},{default:v(()=>[l[17]||(l[17]=e("thead",{class:"bg-background"},[e("tr",null,[e("th",{class:"text-sharp d-none"},"Sort"),e("th",{class:"text-sharp text-center"},"Action"),e("th",{class:"text-sharp text-center"},"Status"),e("th",{class:"text-sharp"},"User"),e("th",{class:"text-sharp"},"Amount"),e("th",{class:"text-sharp"},"PayPal Email"),e("th",{class:"text-sharp"},"Created"),e("th",{class:"text-sharp"},"Settled")])],-1)),e("tbody",null,[(o(!0),u(R,null,z(s(i),(t,I)=>{var H;return o(),u("tr",{key:t._id},[e("td",Ke,r(I+1),1),e("td",null,[L(V,null,{default:v(()=>[t.status===s(d).PENDING?(o(),u("a",{key:0,onClick:()=>E(t,s(d).APPROVED),class:"dropdown-item border-bottom",href:"javascript:;"},l[14]||(l[14]=[e("i",{class:k("bi bi-check-circle me-2")},null,-1),b("Approve")]),8,Ye)):C("",!0),t.status===s(d).PENDING?(o(),u("a",{key:1,onClick:()=>E(t,s(d).CANCELLED),class:"dropdown-item",href:"javascript:;"},l[15]||(l[15]=[e("i",{class:k("bi bi-slash-circle me-2")},null,-1),b("Cancel")]),8,qe)):C("",!0),t.status!==s(d).PENDING?(o(),u("a",{key:2,onClick:()=>T(t),class:"dropdown-item",href:"javascript:;"},l[16]||(l[16]=[e("i",{class:"bi bi-trash me-2"},null,-1),b("Delete")]),8,Je)):C("",!0)]),_:2},1024)]),e("td",Qe,[e("span",{class:k(`badge light badge-${("Helpers"in a?a.Helpers:s(c)).toStatus(t.status)}`)},r(("Helpers"in a?a.Helpers:s(c)).toTitleCase(t.status)),3)]),e("td",null,r(("Helpers"in a?a.Helpers:s(c)).toTitleCase(((H=t.user)==null?void 0:H.username)||"Unknown")),1),e("td",null,r(("Helpers"in a?a.Helpers:s(c)).toCurrency(t.amount)),1),e("td",null,r(t.paypalEmail),1),e("td",null,r(("Helpers"in a?a.Helpers:s(c)).toNiceDate(t.createdAt)),1),e("td",null,r(t.status===s(d).PENDING?"--":("Helpers"in a?a.Helpers:s(c)).toNiceDate(t.updatedAt)),1)])}),128))])]),_:1})):(o(),y(B,{key:0,rows:8,cols:6,searching:""}))]))])]),e("div",Xe,[e("div",Ze,[l[24]||(l[24]=e("div",{class:"card-header"},[e("h4",{class:"card-title"},"Users Withdrawals")],-1)),s(n)&&!((Q=s(D))!=null&&Q.length)?(o(),y(j,{key:0},{default:v(()=>l[19]||(l[19]=[b(" No Withdrawal Record Found ")])),_:1})):(o(),u("div",we,[s(n)?(o(),y(F,{key:1,ordering:"",searching:""},{default:v(()=>[l[23]||(l[23]=e("thead",{class:"bg-background"},[e("tr",null,[e("th",{class:"text-sharp d-none"},"Sort"),e("th",{class:"text-sharp text-center"},"Action"),e("th",{class:"text-sharp text-center"},"Status"),e("th",{class:"text-sharp"},"User"),e("th",{class:"text-sharp"},"Amount"),e("th",{class:"text-sharp"},"CashApp Tag"),e("th",{class:"text-sharp"},"Created"),e("th",{class:"text-sharp"},"Settled")])],-1)),e("tbody",null,[(o(!0),u(R,null,z(s(D),(t,I)=>{var H;return o(),u("tr",{key:t._id},[e("td",et,r(I+1),1),e("td",null,[L(V,null,{default:v(()=>[t.status===s(d).PENDING?(o(),u("a",{key:0,onClick:()=>E(t,s(d).APPROVED),class:"dropdown-item border-bottom",href:"javascript:;"},l[20]||(l[20]=[e("i",{class:k("bi bi-check-circle me-2")},null,-1),b("Approve")]),8,tt)):C("",!0),t.status===s(d).PENDING?(o(),u("a",{key:1,onClick:()=>E(t,s(d).CANCELLED),class:"dropdown-item",href:"javascript:;"},l[21]||(l[21]=[e("i",{class:k("bi bi-slash-circle me-2")},null,-1),b("Cancel")]),8,st)):C("",!0),t.status!==s(d).PENDING?(o(),u("a",{key:2,onClick:()=>T(t),class:"dropdown-item",href:"javascript:;"},l[22]||(l[22]=[e("i",{class:"bi bi-trash me-2"},null,-1),b("Delete")]),8,at)):C("",!0)]),_:2},1024)]),e("td",lt,[e("span",{class:k(`badge light badge-${("Helpers"in a?a.Helpers:s(c)).toStatus(t.status)}`)},r(("Helpers"in a?a.Helpers:s(c)).toTitleCase(t.status)),3)]),e("td",null,r(("Helpers"in a?a.Helpers:s(c)).toTitleCase(((H=t.user)==null?void 0:H.username)||"Unknown")),1),e("td",null,r(("Helpers"in a?a.Helpers:s(c)).toCurrency(t.amount)),1),e("td",null,r(t.cashAppTag),1),e("td",null,r(("Helpers"in a?a.Helpers:s(c)).toNiceDate(t.createdAt)),1),e("td",null,r(t.status===s(d).PENDING?"--":("Helpers"in a?a.Helpers:s(c)).toNiceDate(t.updatedAt)),1)])}),128))])]),_:1})):(o(),y(B,{key:0,rows:8,cols:6,searching:""}))]))])])])])])]),L(re,{"is-open":s(P),status:s(p).status,title:s(p).title,message:s(p).message,onConfirm:s(p).onConfirm,onClose:l[0]||(l[0]=t=>P.value=!1)},null,8,["is-open","status","title","message","onConfirm"])],64)}}});export{ut as default};

import{H as d}from"./helpers-e3b30bc1.js";import{_ as B,a as D,b as P}from"./EmptyResourceComponent-c4bb86e1.js";import{N as F,B as V,g as v,O as E,e as $,f as R,E as A,a as f,b as e,t as l,u as a,c as m,w as b,o as n,l as S,F as L,m as N}from"./index-3efd29d9.js";const M=F("referral",()=>{const k=V(),i="referral",c=v([]),u=v(!1),_=v([]),p=v(!1);function g(r){c.value=r}function h(r){u.value=r}function t(r){_.value=r}function s(r){p.value=r}async function y(){h(!1);try{const r=await E.get(`/master/${i}/users`);g(r.data.data.referrals)}catch(r){console.error(r),k.handlePost(r.response)}h(!0)}async function H(){s(!1);try{const r=await E.get(`/master/${i}/earnings/users`);t(r.data.data.referralEarnings)}catch(r){console.error(r),k.handlePost(r.response)}s(!0)}return{loaded:u,referrals:c,fetchAll:y,referralUsersLoaded:p,referralUsers:_,fetchAllReferralUsers:H}}),O={class:"row"},j={class:"col-xl-3 col-xxl-6 col-lg-6 col-sm-6"},q={class:"widget-stat card bg-primary"},z={class:"card-body p-4"},G={class:"media"},I={class:"media-body text-white text-end"},J={class:"text-white"},K={class:"col-xl-3 col-xxl-6 col-lg-6 col-sm-6"},Q={class:"widget-stat card bg-secondary"},W={class:"card-body p-4"},X={class:"media"},Y={class:"media-body text-white text-end"},Z={class:"text-white"},ee={class:"col-12"},se={class:"card"},te={key:1,class:"card-body pt-0 px-0"},re={class:"d-none"},ae={class:"col-12 mt-4"},le={class:"card"},oe={key:1,class:"card-body pt-0 px-0"},ne={class:"d-none"},ue=$({__name:"ReferralPage",setup(k){const i=M(),c=R(()=>i.referralUsers),u=R(()=>i.referralUsersLoaded);u.value||i.fetchAllReferralUsers();const _=R(()=>i.referrals),p=R(()=>i.loaded);p.value||i.fetchAll();const g=v(0);p.value&&(g.value=c.value.length),A(u,()=>{g.value=c.value.length});const h=v(0);return p.value&&(h.value=c.value.reduce((t,s)=>t+s.earnings,0)),A(u,()=>{h.value=c.value.reduce((t,s)=>t+s.earnings,0)}),(t,s)=>{var U,C;const y=B,H=P,r=D;return n(),f("div",O,[e("div",j,[e("div",q,[e("div",z,[e("div",G,[s[1]||(s[1]=e("span",{class:"me-3"},[e("i",{class:"flaticon-381-user-7"})],-1)),e("div",I,[s[0]||(s[0]=e("p",{class:"mb-1"},"Total Active Referrers",-1)),e("h3",J,l(a(g)),1)])])])])]),e("div",K,[e("div",Q,[e("div",W,[e("div",X,[s[3]||(s[3]=e("span",{class:"me-3"},[e("i",{class:"flaticon-381-heart"})],-1)),e("div",Y,[s[2]||(s[2]=e("p",{class:"mb-1"},"Total Referral Earnings",-1)),e("h3",Z,l(("Helpers"in t?t.Helpers:a(d)).toCurrency(a(h))),1)])])])])]),e("div",ee,[e("div",se,[s[6]||(s[6]=e("div",{class:"card-header"},[e("h4",{class:"card-title"},"Active Referred Users")],-1)),a(u)&&!((U=a(c))!=null&&U.length)?(n(),m(y,{key:0},{default:b(()=>s[4]||(s[4]=[S(" No Referral Record Found ")])),_:1})):(n(),f("div",te,[a(u)?(n(),m(r,{key:1},{default:b(()=>[s[5]||(s[5]=e("thead",{class:"bg-background"},[e("tr",null,[e("th",{class:"text-sharp d-none"},"Sort"),e("th",{class:"text-sharp"},"User"),e("th",{class:"text-sharp"},"Referred"),e("th",{class:"text-sharp"},"Earnings"),e("th",{class:"text-sharp"},"Referred")])],-1)),e("tbody",null,[(n(!0),f(L,null,N(a(c),(o,w)=>(n(),f("tr",{key:o.user._id},[e("td",re,l(w+1),1),e("td",null,l(("Helpers"in t?t.Helpers:a(d)).toTitleCase(o.referrer.username)),1),e("td",null,l(("Helpers"in t?t.Helpers:a(d)).toTitleCase(o.user.username)),1),e("td",null,l(("Helpers"in t?t.Helpers:a(d)).toCurrency(o.earnings)),1),e("td",null,l(("Helpers"in t?t.Helpers:a(d)).toNiceDate(o.user.createdAt)),1)]))),128))])]),_:1})):(n(),m(H,{key:0,rows:8,cols:6}))]))])]),e("div",ae,[e("div",le,[s[9]||(s[9]=e("div",{class:"card-header"},[e("h4",{class:"card-title"},"Referral Earnings History")],-1)),a(p)&&!((C=a(_))!=null&&C.length)?(n(),m(y,{key:0},{default:b(()=>s[7]||(s[7]=[S(" No Referral Earnings Record Found ")])),_:1})):(n(),f("div",oe,[a(p)?(n(),m(r,{key:1},{default:b(()=>[s[8]||(s[8]=e("thead",{class:"bg-background"},[e("tr",null,[e("th",{class:"text-sharp d-none"},"Sort"),e("th",{class:"text-sharp"},"User"),e("th",{class:"text-sharp"},"Referred"),e("th",{class:"text-sharp"},"Type"),e("th",{class:"text-sharp"},"Rate"),e("th",{class:"text-sharp"},"Credited"),e("th",{class:"text-sharp"},"Date")])],-1)),e("tbody",null,[(n(!0),f(L,null,N(a(_),(o,w)=>{var x,T;return n(),f("tr",{key:o._id},[e("td",ne,l(w+1),1),e("td",null,l(("Helpers"in t?t.Helpers:a(d)).toTitleCase(((x=o.referrer)==null?void 0:x.username)||"Unknown")),1),e("td",null,l(("Helpers"in t?t.Helpers:a(d)).toTitleCase(((T=o.user)==null?void 0:T.username)||"Unknown")),1),e("td",null,l(("Helpers"in t?t.Helpers:a(d)).toTitleCase(o.type)),1),e("td",null,l(o.rate+"%"),1),e("td",null,l(("Helpers"in t?t.Helpers:a(d)).toCurrency(o.amount)),1),e("td",null,l(("Helpers"in t?t.Helpers:a(d)).toNiceDate(o.updatedAt)),1)])}),128))])]),_:1})):(n(),m(H,{key:0,rows:8,cols:6}))]))])])])}}});export{ue as default};

import{W as q,H as S}from"./helpers-e3b30bc1.js";import{N as de,B as ie,g as N,O as I,e as be,f as D,h as ye,R as J,a as _,b as e,G as Me,u as s,c as H,w as W,i as c,F as G,j as _e,k as We,o as w,l as O,m as K,v as B,t as u,y as Ce}from"./index-3efd29d9.js";import{_ as ge,a as ke,b as Se}from"./EmptyResourceComponent-c4bb86e1.js";import{_ as Ne}from"./MyDropdownComponent-1207980f.js";import{O as L}from"./otherWithdrawalMethod.enum-d7b5a2af.js";import{u as Ee}from"./currency.store-9844ee93.js";import{c as Z,b as Q,a as R}from"./index.esm-3fd077bb.js";const Pe=de("otherWithdrawalMethod",()=>{const i=ie(),n="other-withdrawal-method",f=N([]),E=N(!1);function b(h){f.value=h}function C(h){E.value=h}function g(h,d){const l=f.value;if(!l)return;const r=l.findIndex(p=>p._id===h);l[r]=d,b(l)}async function k(h){try{i.setPost(!0);const d=await I.patch(`master/${n}/update-status/${h.withdrawalMethodId}`,h);g(h.withdrawalMethodId,d.data.data.withdrawalMethod),i.handlePost(d)}catch(d){console.error(d),i.handlePost(d.response)}}async function A(){C(!1);try{const h=await I.get(`master/${n}`);b(h.data.data.withdrawalMethods)}catch(h){console.error(h),i.handlePost(h.response)}C(!0)}async function x(h){try{i.setPost(!0);const d=await I.put(`master/${n}/update/${h.withdrawalMethodId}`,h);g(h.withdrawalMethodId,d.data.data.withdrawalMethod),i.handlePost(d)}catch(d){console.error(d),i.handlePost(d.response)}}return{loaded:E,otherWithdrawalMethods:f,fetchAll:A,updateOtherWithdrawalMethodStatus:k,updateOtherWithdrawalMethod:x}}),$e=de("withdrawalMethod",()=>{const i=ie(),n="withdrawal-method",f=N([]),E=N(!1);function b(l){f.value=l}function C(l){E.value=l}function g(l,r){const p=f.value;if(!p)return;const T=p.findIndex(F=>F._id===l);p[T]=r,b(p)}async function k(l){try{i.setPost(!0);const r=await I.patch(`master/${n}/update-status/${l.withdrawalMethodId}`,l);g(l.withdrawalMethodId,r.data.data.withdrawalMethod),i.handlePost(r)}catch(r){console.error(r),i.handlePost(r.response)}}async function A(){C(!1);try{const l=await I.get(`master/${n}`);b(l.data.data.withdrawalMethods)}catch(l){console.error(l),i.handlePost(l.response)}C(!0)}async function x(l){try{i.setPost(!0);const r=await I.post(`master/${n}/create`,l),{withdrawalMethod:p}=r.data.data;b([...f.value,p]),i.handlePost(r)}catch(r){console.error(r),i.handlePost(r.response)}}async function h(l){try{i.setPost(!0);const r=await I.put(`master/${n}/update/${l.withdrawalMethodId}`,l);g(l.withdrawalMethodId,r.data.data.withdrawalMethod),i.handlePost(r)}catch(r){console.error(r),i.handlePost(r.response)}}async function d(l){try{i.setPost(!0);const r=await I.delete(`master/${n}/delete/${l}`),p=f.value;if(!p)return;const T=p.filter(F=>F._id!==l);b(T),i.handlePost(r)}catch(r){console.error(r),i.handlePost(r.response)}}return{loaded:E,withdrawalMethods:f,fetchAll:A,addNewWithdrawalMethod:x,updateWithdrawalMethodStatus:k,deleteWithdrawalMethod:d,updateWithdrawalMethod:h}}),qe={class:"row mt-4"},Ie={class:"col-12"},Ae={class:"custom-tab-1"},Fe={class:"tab-content"},Oe={id:"crypto",class:"tab-pane fade active show"},xe={class:"card"},Te={class:"card-header"},De={key:1,class:"card-body pt-0 px-0"},He=["onClick"],Be=["onClick"],Le=["onClick"],Re={class:"d-flex"},Ue=["src","alt"],je={class:"d-flex flex-column"},Ye={class:"fw-bold"},ze={class:"fs-14"},Ve={class:"text-center"},Ge={id:"others",class:"tab-pane fade"},Je={class:"card"},Ke={class:"card-header"},Qe={key:1,class:"card-body pt-0 px-0"},Xe=["onClick"],Ze=["onClick"],et={class:"text-center"},tt={class:"w-100"},at={class:"mb-3"},st=["value","selected"],ot={class:"error-message"},lt={class:"mb-3"},rt={class:"error-message"},nt={class:"mb-3"},dt={class:"error-message"},it={class:"mb-3"},ut={class:"error-message"},ht={class:"w-100"},ct={class:"mb-3"},pt=["value","selected"],wt={class:"error-message"},mt={class:"mb-3"},ft={class:"error-message"},vt={class:"mb-3"},bt={class:"error-message"},yt={class:"mb-3"},Mt={class:"error-message"},_t={class:"w-100"},Wt={class:"mb-3"},Ct={class:"error-message"},gt={class:"mb-3"},kt={class:"error-message"},At=be({__name:"WithdrawalMethodsPage",setup(i){const n=N(),f=N(L.CRYPTO),E=a=>f.value=a,b=N(!1),C=N(!1),g=N(!1),k=N(!1),A=Ee(),x=D(()=>A.currencies);D(()=>A.loaded).value||A.fetchAll();const d=$e(),l=D(()=>d.withdrawalMethods),r=D(()=>d.loaded);r.value||d.fetchAll();const p=Pe(),T=D(()=>p.otherWithdrawalMethods),F=D(()=>p.loaded);F.value||p.fetchAll();const m=ye({status:J.INFO,title:"",message:"",onConfirm:()=>{}}),ue=Z({currencyId:Q().required("Currency is required"),network:Q().required("Network is required"),fee:R().typeError("Fee is required").min(0,"Fee should not be a negative value").required("Fee is required"),minWithdrawal:R().typeError("Min withdrawal is required").positive("Min withdrawal should be greater than zero").required("Min withdrawal is required")}),he=Z({currencyId:Q().required("Currency is required"),network:Q().required("Network is required"),fee:R().typeError("Fee is required").min(0,"Fee should not be a negative value").required("Fee is required"),minWithdrawal:R().typeError("Min withdrawal is required").positive("Min withdrawal should be greater than zero").required("Min withdrawal is required")}),ce=Z({fee:R().typeError("Fee is required").min(0,"Fee should not be a negative value").required("Fee is required"),minWithdrawal:R().typeError("Min withdrawal is required").positive("Min withdrawal should be greater than zero").required("Min withdrawal is required")}),ee=(a,t)=>{n.value=a,E(t),t===L.CRYPTO?C.value=!0:g.value=!0},te=(a,t)=>{var P,U,j,Y;E(t),n.value=a,n.value.status===q.ENABLED?(m.status=J.WARNING,m.title=`Do you really wants to disabled ${S.toTitleCase(((P=a.currency)==null?void 0:P.name)||"")} - ${(U=a.currency)==null?void 0:U.symbol.toUpperCase()}?`,m.message="Disabling this withdrawal method will hide it from all users, there by preventing them from withdrawing with it."):(m.status=J.INFO,m.title=`Do you really wants to enable ${S.toTitleCase(((j=a.currency)==null?void 0:j.name)||"")} - ${(Y=a.currency)==null?void 0:Y.symbol.toUpperCase()}?`,m.message="Enabling this withdrawal method will allow users to withdrawal with it."),m.onConfirm=we,k.value=!0},pe=a=>{var t,P;n.value=a,m.status=J.DANGER,m.title=`Do you really wants to delete  ${S.toTitleCase(((t=a.currency)==null?void 0:t.name)||"")} - ${(P=a.currency)==null?void 0:P.symbol.toUpperCase()}?`,m.message="",m.onConfirm=fe,k.value=!0},we=()=>{if(!n.value)return;k.value=!1;const a=n.value._id,t=n.value.status===q.ENABLED?q.DISABLED:q.ENABLED;f.value===L.CRYPTO?d.updateWithdrawalMethodStatus({withdrawalMethodId:a,status:t}):p.updateOtherWithdrawalMethodStatus({withdrawalMethodId:a,status:t})},me=a=>{b.value=!1,d.addNewWithdrawalMethod(a)},ae=a=>{f.value===L.CRYPTO?(C.value=!1,d.updateWithdrawalMethod(a)):(g.value=!1,p.updateOtherWithdrawalMethod(a))},fe=()=>{k.value=!1,n.value&&d.deleteWithdrawalMethod(n.value._id)};return(a,t)=>{var se,oe;const P=ge,U=Se,j=Ne,Y=ke,ve=_e,y=Ce,X=We;return w(),_(G,null,[e("div",qe,[e("div",Ie,[e("div",Ae,[t[15]||(t[15]=Me('<ul class="nav nav-tabs border-2 d-flex text-nowrap mb-4"><li class="nav-item"><a href="#crypto" data-bs-toggle="tab" class="nav-link show active rounded-top m-0 text-center" style="border:none;">Crypto</a></li><li class="nav-item"><a href="#others" data-bs-toggle="tab" class="nav-link rounded-top m-0 text-center" style="border:none;">Others</a></li></ul>',1)),e("div",Fe,[e("div",Oe,[e("div",xe,[e("div",Te,[t[6]||(t[6]=e("h4",{class:"card-title"},"Withdrawal Methods",-1)),e("button",{class:"btn btn-primary",type:"button",onClick:t[0]||(t[0]=()=>b.value=!0)}," Add New ")]),s(r)&&!((se=s(l))!=null&&se.length)?(w(),H(P,{key:0},{default:W(()=>t[7]||(t[7]=[O(" No Withdrawal Methods Found ")])),_:1})):(w(),_("div",De,[s(r)?(w(),H(Y,{key:1},{default:W(()=>[t[10]||(t[10]=e("thead",{class:"bg-background"},[e("tr",null,[e("th",{class:"text-sharp"},"Action"),e("th",{class:"text-sharp"},"Currency"),e("th",{class:"text-sharp"},"Network"),e("th",{class:"text-sharp text-center"},"Status")])],-1)),e("tbody",null,[(w(!0),_(G,null,K(s(l),o=>{var M,v,$,z;return w(),_("tr",{key:o._id},[e("td",null,[c(j,null,{default:W(()=>[e("a",{class:"dropdown-item border-bottom",href:"javascript:;",onClick:()=>ee(o,s(L).CRYPTO)},t[8]||(t[8]=[e("i",{class:"bi bi-pencil-square me-2"},null,-1),O(" Edit")]),8,He),e("a",{class:"dropdown-item border-bottom",href:"javascript:;",onClick:()=>te(o,s(L).CRYPTO)},[e("i",{class:B(`bi bi-${o.status===("WithdrawalMethodStatus"in a?a.WithdrawalMethodStatus:s(q)).ENABLED?"slash":"check"}-circle me-2`)},null,2),O(" "+u(o.status===("WithdrawalMethodStatus"in a?a.WithdrawalMethodStatus:s(q)).ENABLED?"Disable":"Enable"),1)],8,Be),e("a",{class:"dropdown-item",href:"javascript:;",onClick:()=>pe(o)},t[9]||(t[9]=[e("i",{class:"bi bi-trash me-2"},null,-1),O("Delete")]),8,Le)]),_:2},1024)]),e("td",null,[e("div",Re,[e("img",{src:`/icons/crypto-svg/${(M=o.currency)==null?void 0:M.logo}`,class:"me-3",alt:(v=o.currency)==null?void 0:v.name,width:"24"},null,8,Ue),e("div",je,[e("span",Ye,u(("Helpers"in a?a.Helpers:s(S)).toTitleCase((($=o.currency)==null?void 0:$.name)||"Unknown")),1),e("span",ze,u((z=o.currency)==null?void 0:z.symbol.toUpperCase()),1)])])]),e("td",null,u(o.network.toUpperCase()),1),e("td",Ve,[e("span",{class:B(`badge light badge-${("Helpers"in a?a.Helpers:s(S)).toStatus(o.status)}`)},u(("Helpers"in a?a.Helpers:s(S)).toTitleCase(o.status)),3)])])}),128))])]),_:1})):(w(),H(U,{key:0,rows:4,cols:6}))]))])]),e("div",Ge,[e("div",Je,[e("div",Ke,[t[11]||(t[11]=e("h4",{class:"card-title"},"Withdrawal Methods",-1)),e("button",{class:"btn btn-primary",type:"button",onClick:t[1]||(t[1]=()=>b.value=!0)}," Add New ")]),s(F)&&!((oe=s(T))!=null&&oe.length)?(w(),H(P,{key:0},{default:W(()=>t[12]||(t[12]=[O(" No Withdrawal Methods Found ")])),_:1})):(w(),_("div",Qe,[s(F)?(w(),H(Y,{key:1},{default:W(()=>[t[14]||(t[14]=e("thead",{class:"bg-background"},[e("tr",null,[e("th",{class:"text-sharp"},"Action"),e("th",{class:"text-sharp"},"Type"),e("th",{class:"text-sharp text-center"},"Status")])],-1)),e("tbody",null,[(w(!0),_(G,null,K(s(T),o=>(w(),_("tr",{key:o._id},[e("td",null,[c(j,null,{default:W(()=>[e("a",{class:"dropdown-item border-bottom",href:"javascript:;",onClick:()=>ee(o,o.type)},t[13]||(t[13]=[e("i",{class:"bi bi-pencil-square me-2"},null,-1),O(" Edit")]),8,Xe),e("a",{class:"dropdown-item border-bottom",href:"javascript:;",onClick:()=>te(o,o.type)},[e("i",{class:B(`bi bi-${o.status===("WithdrawalMethodStatus"in a?a.WithdrawalMethodStatus:s(q)).ENABLED?"slash":"check"}-circle me-2`)},null,2),O(" "+u(o.status===("WithdrawalMethodStatus"in a?a.WithdrawalMethodStatus:s(q)).ENABLED?"Disable":"Enable"),1)],8,Ze)]),_:2},1024)]),e("td",null,u(o.type),1),e("td",et,[e("span",{class:B(`badge light badge-${("Helpers"in a?a.Helpers:s(S)).toStatus(o.status)}`)},u(("Helpers"in a?a.Helpers:s(S)).toTitleCase(o.status)),3)])]))),128))])]),_:1})):(w(),H(U,{key:0,rows:4,cols:6}))]))])])])])])]),c(ve,{"is-open":s(k),status:s(m).status,title:s(m).title,message:s(m).message,onConfirm:s(m).onConfirm,onClose:t[2]||(t[2]=o=>k.value=!1)},null,8,["is-open","status","title","message","onConfirm"]),c(X,{"is-open":s(b),onClose:t[3]||(t[3]=()=>b.value=!1),onConfirm:me,"validation-schema":s(ue),title:"Add New Withdrawal Method"},{default:W(({errors:o})=>[e("div",tt,[e("div",at,[t[17]||(t[17]=e("label",{class:"form-label text-sharp"},"Currency",-1)),c(y,{class:B(["default-select form-control wide mb-3",{"border-danger":o.currency}]),name:"currencyId",as:"select","validate-on-input":!0},{default:W(({value:M})=>[t[16]||(t[16]=e("option",{value:"",disabled:""},"Select a currency",-1)),(w(!0),_(G,null,K(s(x),v=>(w(),_("option",{class:"text-black",key:v._id,value:v._id,selected:M&&M.includes(v)},u(("Helpers"in a?a.Helpers:s(S)).toTitleCase(v.name))+" - "+u(v.symbol.toUpperCase()),9,st))),128))]),_:2},1032,["class"]),e("span",ot,u(o.currencyId),1)]),e("div",lt,[t[18]||(t[18]=e("label",{class:"form-label text-sharp"},"Network",-1)),c(y,{name:"network",type:"text",placeholder:"Network",class:"form-control","validate-on-input":!0}),e("span",rt,u(o.network),1)]),e("div",nt,[t[19]||(t[19]=e("label",{class:"form-label text-sharp"},"Fee",-1)),c(y,{name:"fee",type:"number",placeholder:"Fee",class:"form-control","validate-on-input":!0}),e("span",dt,u(o.fee),1)]),e("div",it,[t[20]||(t[20]=e("label",{class:"form-label text-sharp"},"Min Withdrawal",-1)),c(y,{name:"minWithdrawal",type:"number",placeholder:"Min Withdrawal",class:"form-control","validate-on-input":!0}),e("span",ut,u(o.minWithdrawal),1)])])]),_:1},8,["is-open","validation-schema"]),c(X,{"is-open":s(C),onClose:t[4]||(t[4]=()=>C.value=!1),onConfirm:ae,"validation-schema":s(he),title:"Add New Withdrawal Method"},{default:W(({errors:o})=>{var M,v,$,z,le,re;return[e("div",ht,[c(y,{name:"withdrawalMethodId",type:"hidden",class:"form-control",value:(M=s(n))==null?void 0:M._id},null,8,["value"]),e("div",ct,[t[22]||(t[22]=e("label",{class:"form-label text-sharp"},"Currency",-1)),c(y,{class:B(["default-select form-control wide mb-3",{"border-danger":o.currency}]),name:"currencyId",as:"select",value:($=(v=s(n))==null?void 0:v.currency)==null?void 0:$._id,"validate-on-input":!0},{default:W(({value:ne})=>[t[21]||(t[21]=e("option",{value:"",disabled:""},"Select a currency",-1)),(w(!0),_(G,null,K(s(x),V=>(w(),_("option",{class:"text-black",key:V._id,value:V._id,selected:ne&&ne.includes(V)},u(("Helpers"in a?a.Helpers:s(S)).toTitleCase(V.name))+" - "+u(V.symbol.toUpperCase()),9,pt))),128))]),_:2},1032,["value","class"]),e("span",wt,u(o.currencyId),1)]),e("div",mt,[t[23]||(t[23]=e("label",{class:"form-label text-sharp"},"Network",-1)),c(y,{name:"network",type:"text",placeholder:"Network",class:"form-control","validate-on-input":!0,value:(z=s(n))==null?void 0:z.network},null,8,["value"]),e("span",ft,u(o.network),1)]),e("div",vt,[t[24]||(t[24]=e("label",{class:"form-label text-sharp"},"Fee",-1)),c(y,{name:"fee",type:"number",placeholder:"Fee",class:"form-control","validate-on-input":!0,value:(le=s(n))==null?void 0:le.fee},null,8,["value"]),e("span",bt,u(o.fee),1)]),e("div",yt,[t[25]||(t[25]=e("label",{class:"form-label text-sharp"},"Min Withdrawal",-1)),c(y,{name:"minWithdrawal",type:"number",placeholder:"Min Withdrawal",class:"form-control","validate-on-input":!0,value:(re=s(n))==null?void 0:re.minWithdrawal},null,8,["value"]),e("span",Mt,u(o.minWithdrawal),1)])])]}),_:1},8,["is-open","validation-schema"]),c(X,{"is-open":s(g),onClose:t[5]||(t[5]=()=>g.value=!1),onConfirm:ae,"validation-schema":s(ce),title:`Edit ${s(f)} Withdrawal Method`},{default:W(({errors:o})=>{var M,v,$;return[e("div",_t,[c(y,{name:"withdrawalMethodId",type:"hidden",class:"form-control",value:(M=s(n))==null?void 0:M._id},null,8,["value"]),e("div",Wt,[t[26]||(t[26]=e("label",{class:"form-label text-sharp"},"Fee",-1)),c(y,{name:"fee",type:"number",placeholder:"Fee",class:"form-control","validate-on-input":!0,value:(v=s(n))==null?void 0:v.fee},null,8,["value"]),e("span",Ct,u(o.fee),1)]),e("div",gt,[t[27]||(t[27]=e("label",{class:"form-label text-sharp"},"Min Withdrawal",-1)),c(y,{name:"minWithdrawal",type:"number",placeholder:"Min Withdrawal",class:"form-control","validate-on-input":!0,value:($=s(n))==null?void 0:$.minWithdrawal},null,8,["value"]),e("span",kt,u(o.minWithdrawal),1)])])]}),_:1},8,["is-open","validation-schema","title"])],64)}}});export{At as default};

import{e as G,g as C,Q as le,o as g,a as w,b as e,t as h,u as t,D as z,v as H,l as L,p as A,d as Y,N as Z,B as ee,O as I,f as U,h as te,R as M,F as O,m as B,c as F,w as R,i as N,n as ie,j as se,y as de,k as ce,A as ue,G as pe}from"./index-3efd29d9.js";import{H as x}from"./helpers-e3b30bc1.js";import{_ as me}from"./MyImageFileComponent-63685e36.js";import{c as fe,b as ye,a as q,d as X}from"./index.esm-3fd077bb.js";var c=(r=>(r.RUNNING="running",r.SUSPENDED="suspended",r.MARKET_OPENED="market opened",r.MARKET_CLOSED="market closed",r.TRADE_ON_HOLD="trade on hold",r.INSUFFICIENT_GAS="insufficient gas",r.COMPLETED="completed",r))(c||{});const ve={class:"col-xl-4 col-lg-6 col-sm-12"},he={class:"card"},be={class:"card-header border-0 pb-0 justify-content-start align-items-stretch gap-2"},_e={class:"d-flex flex-column justify-content-between"},ge={class:"card-title fw-bold"},Ce={class:"d-flex gap-2 align-items-center"},we={class:"mb-0"},Pe={class:"card-header border-0 pb-0 justify-content-start align-items-stretch gap-2"},$e={class:"media me-2 rounded-profile overflow-hidden"},Te=["src"],De={class:"d-flex flex-column justify-content-between"},Ee={class:"card-title fw-bold"},Se={class:"d-flex gap-2 align-items-center"},Ne={class:"card-body pt-0"},Ae={class:"text-white mb-2"},ke={class:"ms-3 fw-bold text-primary fs-5"},Me={class:"text-white mb-2"},Ie={class:"text-center mb-0"},xe={class:"d-flex gap-2 mt-2"},He={key:0,class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},Ue=["disabled"],je={class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},Le=["disabled"],Oe={class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},Re=["disabled"],Fe={key:1,class:"w-100 d-flex gap-2 flex-column justify-content-center align-items-center"},Ge=["disabled"],qe=G({__name:"CopyCardComponent",props:{copy:{}},setup(r){const s=r,f=C(0),$=C(0),b=C(0),D=C(0),P=C(0),_=setInterval(()=>{var u;const o=s.copy.runTime+(s.copy.status===c.RUNNING?new Date().getTime()-new Date(s.copy.resumeTime).getTime():0),d=o/(1e3*60*60*24);f.value=(((u=s.copy.copyTrade)==null?void 0:u.dailyPercentageProfit)||100)*d*s.copy.amount/100+s.copy.extraProfit,$.value=Math.floor(o/(1e3*60*60*24)),b.value=Math.floor(o%(1e3*60*60*24)/(1e3*60*60)),D.value=Math.floor(o%(1e3*60*60)/(1e3*60)),P.value=Math.floor(o%(1e3*60)/1e3)},1e3);return le(()=>{clearInterval(_)}),(o,d)=>{var u,y,n,l;return g(),w("div",ve,[e("div",he,[e("div",be,[e("div",_e,[e("h2",ge,h(((u=o.copy.user)==null?void 0:u.name)||"Unknown"),1),e("div",Ce,[e("p",we,"@"+h(((y=o.copy.user)==null?void 0:y.username)||"Unknown"),1)])])]),d[6]||(d[6]=e("hr",{class:"mt-2"},null,-1)),e("div",Pe,[e("div",$e,[e("img",{alt:"image",width:"50",src:`${("config"in o?o.config:t(z)).imageHost}/icon/original/${(n=o.copy.copyTrade)==null?void 0:n.icon}`},null,8,Te)]),e("div",De,[e("h2",Ee,h(((l=o.copy.copyTrade)==null?void 0:l.name)||"Unknown"),1),e("div",Se,[e("span",{class:H(`badge light badge-${("Helpers"in o?o.Helpers:t(x)).toStatus(o.copy.status)}`)},h(("Helpers"in o?o.Helpers:t(x)).toTitleCase(o.copy.status)),3)])])]),d[7]||(d[7]=e("hr",{class:"mt-2"},null,-1)),e("div",Ne,[e("ul",null,[e("li",Ae,[d[0]||(d[0]=L(" Amount Invested: ")),e("span",ke,h(("Helpers"in o?o.Helpers:t(x)).toCurrency(o.copy.amount)),1)]),e("li",Me,[L(h(o.copy.status===t(c).COMPLETED?"Amount Received":"Earnings")+": ",1),e("span",{class:H(`ms-3 fw-bold ${o.copy.status===t(c).SUSPENDED?"text-warning":"text-success"}  fs-5`)},h(("Helpers"in o?o.Helpers:t(x)).toCurrency(o.copy.status===t(c).COMPLETED?o.copy.balance:t(f))),3)])]),d[5]||(d[5]=e("hr",{class:"mt-3 mb-2"},null,-1)),e("p",Ie,h(o.copy.status===t(c).COMPLETED?"Trade Closed":o.copy.status===t(c).SUSPENDED?"Trading suspended, contact support for more information":"Trade Running"),1),e("div",xe,[t($)?(g(),w("div",He,[e("button",{disabled:o.copy.status===t(c).SUSPENDED,class:H(`btn light ${o.copy.status===t(c).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Days"},h(t($)),11,Ue),d[1]||(d[1]=e("span",{class:"fw-bold"},"Days",-1))])):A("",!0),e("div",je,[e("button",{disabled:o.copy.status===t(c).SUSPENDED,class:H(`btn light ${o.copy.status===t(c).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Hours"},h(t(b)),11,Le),d[2]||(d[2]=e("span",{class:"fw-bold"},"Hours",-1))]),e("div",Oe,[e("button",{disabled:o.copy.status===t(c).SUSPENDED,class:H(`btn light ${o.copy.status===t(c).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Minutes"},h(t(D)),11,Re),d[3]||(d[3]=e("span",{class:"fw-bold"},"Minutes",-1))]),t($)?A("",!0):(g(),w("div",Fe,[e("button",{disabled:o.copy.status===t(c).SUSPENDED,class:H(`btn light ${o.copy.status===t(c).SUSPENDED?" opacity-50":""} btn-dark px-3 w-100 fw-bold`),title:"Seconds"},h(t(P)),11,Ge),d[4]||(d[4]=e("span",{class:"fw-bold"},"Seconds",-1))]))]),Y(o.$slots,"default")])])])}}});const Be={class:"col-xl-4 col-lg-6 col-sm-12"},ze={class:"card"},Ve={class:"card-header border-0 pb-0 flex-column justify-content-center align-items-center gap-2"},Je={class:"media me-2 rounded-profile overflow-hidden"},Ke=["src"],Qe={class:"d-flex flex-column justify-content-between"},We={class:"card-title fw-bold"},Xe={class:"card-body pt-0"},Ye={class:"text-white mb-2"},Ze={class:"ms-3 fw-bold text-primary fs-5"},et={class:"text-white mb-2"},tt={class:"ms-3 fw-bold text-primary fs-5"},st={class:"text-white mb-2"},ot={class:"ms-3 fw-bold text-success fs-5"},nt=G({__name:"CopyTradeCardComponent",props:{copyTrade:{}},setup(r){return(s,f)=>(g(),w("div",Be,[e("div",ze,[e("div",Ve,[e("div",Je,[e("img",{alt:"image",width:"50",src:`${("config"in s?s.config:t(z)).imageHost}/icon/original/${s.copyTrade.icon}`},null,8,Ke)]),e("div",Qe,[e("h2",We,h(s.copyTrade.name),1)])]),f[3]||(f[3]=e("hr",{class:"mt-2"},null,-1)),e("div",Xe,[e("ul",null,[e("li",Ye,[f[0]||(f[0]=L(" Amount: ")),e("span",Ze,h(("Helpers"in s?s.Helpers:t(x)).toCurrency(s.copyTrade.minAmount))+" - "+h(("Helpers"in s?s.Helpers:t(x)).toCurrency(s.copyTrade.maxAmount)),1)]),e("li",et,[f[1]||(f[1]=L(" Daily Profit: ")),e("span",tt,h(("Helpers"in s?s.Helpers:t(x)).toCurrency(s.copyTrade.minAmount*s.copyTrade.dailyPercentageProfit/100))+" - "+h(("Helpers"in s?s.Helpers:t(x)).toCurrency(s.copyTrade.maxAmount*s.copyTrade.dailyPercentageProfit/100)),1)]),e("li",st,[f[2]||(f[2]=L(" Potential Profit: ")),e("span",ot,h(s.copyTrade.dailyPercentageProfit)+" % Daily",1)])]),Y(s.$slots,"default")])])]))}});const at=Z("copyTrade",()=>{const r=ee(),s="copy-trade",f=C([]),$=C(!1);function b(n){f.value=n}function D(n){$.value=n}function P(n,l){const p=f.value;if(!p)return;const E=p.findIndex(v=>v._id===n);p[E]=l,b(p)}async function _(n){try{r.setPost(!0);const l=await I.patch(`master/${s}/update-status/${n.copyTradeId}`,n);P(n.copyTradeId,l.data.data.copyTrade),r.handlePost(l)}catch(l){console.error(l),r.handlePost(l.response)}}async function o(){D(!1);try{const n=await I.get(`master/${s}`);b(n.data.data.copyTrades)}catch(n){console.error(n),r.handlePost(n.response)}D(!0)}async function d(n){try{r.setPost(!0);const l=await I.post(`master/${s}/create`,n),{copyTrade:p}=l.data.data;return b([...f.value,p]),r.handlePost(l),!0}catch(l){return console.error(l),r.handlePost(l.response),!1}}async function u(n,l){try{r.setPost(!0);const p=await I.put(`master/${s}/update/${n}`,l);return P(n,p.data.data.copyTrade),r.handlePost(p),!0}catch(p){return console.error(p),r.handlePost(p.response),!1}}async function y(n){try{r.setPost(!0);const l=await I.delete(`master/${s}/delete/${n}`),p=f.value;if(!p)return;const E=p.filter(v=>v._id!==n);return b(E),r.handlePost(l),!0}catch(l){return console.error(l),r.handlePost(l.response),!1}}return{loaded:$,copyTrades:f,fetchAll:o,createCopyTrade:d,updateCopyTradeStatus:_,deleteCopyTrade:y,updateCopyTrade:u}}),rt={class:"d-flex justify-content-end mb-3 border-bottom pb-3"},lt={class:"row"},it={class:"dropdown-menu"},dt=["onClick"],ct=["onClick"],ut={class:"w-100"},pt={class:"mb-3 offset-md-3 col-md-6"},mt={class:"error-message file-error"},ft={class:"mb-3"},yt={class:"error-message"},vt={class:"mb-3"},ht={class:"error-message"},bt={class:"mb-3"},_t={class:"error-message"},gt={class:"mb-3"},Ct={class:"error-message"},wt=G({__name:"CopyTrade",setup(r){const s=C(),f=C(),$=(m,a)=>{s.value=m,f.value=a==null?void 0:a.src},b=at(),D=U(()=>b.copyTrades);U(()=>b.loaded).value||b.fetchAll();const _=C();C();const o=m=>_.value=m,d=C(),u=C(!1),y=(m,a,i)=>{f.value=`${z.value.imageHost}/icon/original/${i==null?void 0:i.icon}`,u.value=m,d.value=a,_.value=i},n=C(!1),l=m=>n.value=m,p=te({status:M.INFO,title:"",message:"",onConfirm:()=>{}}),E=m=>{p.status=m.status,p.title=m.title,p.message=m.message,p.onConfirm=m.onConfirm},v=fe({name:ye().required("Copy Trade name is required"),minAmount:q().typeError("Min amount is required").positive("Min amount should be greater than zero").required("Min amount is required"),maxAmount:q().typeError("Max amount is required").positive("Max amount should be greater than zero").required("Max amount is required").test("is-greater","Max amount should be greater than the min",function(m){return this.resolve(X("minAmount"))?m>this.resolve(X("minAmount")):!0}),dailyPercentageProfit:q().typeError("Daily percentage profit is required").positive("Daily percentage profit should be greater than zero").required("Daily percentage profit is required")}),T=m=>{o(m),E({status:M.DANGER,title:"Do you really wants to delete this copyTrade",message:"Please note that this action cannot be reversed",onConfirm:async()=>{_.value&&(await b.deleteCopyTrade(_.value._id),l(!1))}}),l(!0)},k=async m=>{let a=!1;const i=new FormData;i.append("icon",s.value),i.append("name",m.name),i.append("minAmount",m.minAmount),i.append("maxAmount",m.maxAmount),i.append("dailyPercentageProfit",m.dailyPercentageProfit),d.value===0?a=await b.createCopyTrade(i):a=await b.updateCopyTrade(m.copyTradeId,i),a&&(y(!1),s.value=null)};return(m,a)=>{const i=nt,oe=se,j=de,ne=me,ae=ce;return g(),w(O,null,[e("div",rt,[e("button",{class:"btn btn-primary",type:"button",onClick:a[0]||(a[0]=()=>y(!0,0))}," Add New ")]),e("div",lt,[(g(!0),w(O,null,B(t(D),S=>(g(),F(i,{copyTrade:S,key:S._id},{default:R(()=>[a[3]||(a[3]=e("button",{type:"button",class:"btn btn-outline-secondary w-100 mt-3 dropdown-toggle","data-bs-toggle":"dropdown"}," Action ",-1)),e("div",it,[e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:()=>y(!0,1,S)},"Edit",8,dt),e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:()=>T(S)},"Delete",8,ct)])]),_:2},1032,["copyTrade"]))),128))]),N(oe,{"is-open":t(n),status:t(p).status,title:t(p).title,message:t(p).message,onConfirm:t(p).onConfirm,onClose:a[1]||(a[1]=()=>l(!1))},null,8,["is-open","status","title","message","onConfirm"]),N(ae,{"is-open":t(u),onClose:a[2]||(a[2]=()=>y(!1)),onConfirm:k,"validation-schema":t(v),title:t(d)===0?"Create New CopyTrade":"Update CopyTrade"},{default:R(({errors:S})=>{var V,J,K,Q,W;return[e("div",ut,[t(d)===1?(g(),F(j,{key:0,name:"copyTradeId",type:"hidden",class:"form-control",value:(V=t(_))==null?void 0:V._id},null,8,["value"])):A("",!0),e("div",pt,[a[5]||(a[5]=e("label",{class:"form-label text-sharp"},"Copy Trader Image",-1)),e("div",null,[N(ne,{name:"documentImage",type:["image/jpg","image/jpeg","image/png","image/gif"],size:11e6,onChange:$,class:"w-100"},{default:R(({errors:re})=>[e("div",{class:"px-4 d-flex justify-content-center align-items-center flex-column upload-area",style:ie({backgroundImage:`url(${t(f)})`,backgroundPosition:"center",backgroundSize:"cover",aspectRatio:"1/1",height:"200px"})},a[4]||(a[4]=[e("span",{class:"drop-zoon__icon"},[e("svg",{class:"upload-icon",width:"40",height:"40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M13.438 12.81L20 6.25l6.563 6.56M20 23.75V6.255M33.75 23.75v8.75a1.25 1.25 0 01-1.25 1.25h-25a1.25 1.25 0 01-1.25-1.25v-8.75",stroke:"#366CE3","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),e("p",{class:"desc body-sb"},h("Max 11MB, PNG, JPEG, JPG"),-1)]),4),e("span",mt,h(re[0]),1)]),_:2},1024)])]),e("div",ft,[a[6]||(a[6]=e("label",{class:"form-label text-sharp"},"Copy Trader Name",-1)),N(j,{name:"name",type:"text",placeholder:"Copy Trader Name",class:"form-control","validate-on-input":!0,value:t(d)===0?"":(J=t(_))==null?void 0:J.name},null,8,["value"]),e("span",yt,h(S.name),1)]),e("div",vt,[a[7]||(a[7]=e("label",{class:"form-label text-sharp"},"Min Amount",-1)),N(j,{name:"minAmount",type:"number",placeholder:"Min Amount",class:"form-control","validate-on-input":!0,value:t(d)===0?"":(K=t(_))==null?void 0:K.minAmount},null,8,["value"]),e("span",ht,h(S.minAmount),1)]),e("div",bt,[a[8]||(a[8]=e("label",{class:"form-label text-sharp"},"Max Amount",-1)),N(j,{name:"maxAmount",type:"number",placeholder:"Max Amount",class:"form-control","validate-on-input":!0,value:t(d)===0?"":(Q=t(_))==null?void 0:Q.maxAmount},null,8,["value"]),e("span",_t,h(S.maxAmount),1)]),e("div",gt,[a[9]||(a[9]=e("label",{class:"form-label text-sharp"},"Daily Percentage Profit",-1)),N(j,{name:"dailyPercentageProfit",type:"number",placeholder:"Daily Percentage Profit",class:"form-control","validate-on-input":!0,value:t(d)===0?"":(W=t(_))==null?void 0:W.dailyPercentageProfit},null,8,["value"]),e("span",Ct,h(S.dailyPercentageProfit),1)])])]}),_:1},8,["is-open","validation-schema","title"])],64)}}}),Pt=Z("copy",()=>{const r=ee();ue();const s="copy",f=C([]),$=C(!1);function b(u){f.value=u}function D(u){$.value=u}function P(u,y){const n=f.value;if(!n)return;const l=n.findIndex(p=>p._id===u);n[l]=y,b(n)}async function _(){D(!1);try{const u=await I.get(`master/${s}`);b(u.data.data.copies)}catch(u){console.error(u),r.handlePost(u.response)}D(!0)}async function o(u){try{r.setPost(!0);const y=await I.patch(`master/${s}/update-status/${u.copyId}`,u);P(u.copyId,y.data.data.copy),r.handlePost(y)}catch(y){console.error(y),r.handlePost(y.response)}}async function d(u){try{r.setPost(!0);const y=await I.delete(`master/${s}/delete/${u}`),n=f.value;if(!n)return;const l=n.filter(p=>p._id!==u);return b(l),r.handlePost(y),!0}catch(y){return console.error(y),r.handlePost(y.response),!1}}return{loaded:$,copies:f,updateStatus:o,deleteCopy:d,fetchAll:_}}),$t={class:"custom-tab-1"},Tt={class:"tab-content"},Dt={id:"available-packages",class:"tab-pane fade active show"},Et={id:"running-packages",class:"tab-pane fade"},St={class:"row"},Nt={class:"dropdown-menu"},At=["onClick"],kt=["onClick"],Mt=["onClick"],It=["onClick"],xt={id:"closed-packages",class:"tab-pane fade"},Ht={class:"row"},Ut={class:"dropdown-menu"},jt=["onClick"],Lt=["onClick"],Ot=["onClick"],Rt=["onClick"],zt=G({__name:"CopyTradePage",setup(r){const s=Pt(),f=U(()=>s.copies);U(()=>s.loaded).value||s.fetchAll();const b=U(()=>f.value.filter(v=>v.status!==c.COMPLETED)),D=U(()=>f.value.filter(v=>v.status===c.COMPLETED)),P=C(),_=C(),o=v=>P.value=v,d=v=>_.value=v,u=C(!1),y=v=>u.value=v,n=te({status:M.INFO,title:"",message:"",onConfirm:()=>{}}),l=v=>{n.status=v.status,n.title=v.title,n.message=v.message,n.onConfirm=v.onConfirm},p=v=>{o(v),l({status:M.DANGER,title:"Do you really wants to delete this trader",message:"Please note that this action cannot be reversed",onConfirm:async()=>{P.value&&(await s.deleteCopy(P.value._id),y(!1))}}),y(!0)},E=(v,T)=>{o(v),d(T);let k=M.INFO,m="",a="";switch(T){case c.RUNNING:k=M.INFO,m="Do you really wants to make this trader active?",a="";break;case c.SUSPENDED:k=M.WARNING,m="Do you really wants to suspend this trader?",a="";break;case c.COMPLETED:k=M.INFO,m="Do you really wants to close this trader?",a="The earnings will be transferred to the user's withdrawable profit";break}l({status:k,title:m,message:a,onConfirm:async()=>{!P.value||!_.value||(await s.updateStatus({copyId:P.value._id,status:_.value}),y(!1))}}),y(!0)};return(v,T)=>{const k=wt,m=qe,a=se;return g(),w(O,null,[e("div",$t,[T[3]||(T[3]=pe('<ul class="nav nav-tabs border-2 d-flex text-nowrap mb-4"><li class="nav-item"><a href="#available-packages" data-bs-toggle="tab" class="nav-link show active rounded-top m-0 text-center" style="border:none;">Available</a></li><li class="nav-item"><a href="#running-packages" data-bs-toggle="tab" class="nav-link rounded-top m-0 text-center" style="border:none;">Invested</a></li><li class="nav-item"><a href="#closed-packages" data-bs-toggle="tab" class="nav-link rounded-top m-0 text-center" style="border:none;">Closed</a></li></ul>',1)),e("div",Tt,[e("div",Dt,[N(k)]),e("div",Et,[e("div",St,[(g(!0),w(O,null,B(t(b),i=>(g(),F(m,{copy:i,key:i._id},{default:R(()=>[T[1]||(T[1]=e("button",{type:"button",class:"btn btn-outline-secondary w-100 mt-3 dropdown-toggle","data-bs-toggle":"dropdown"}," Action ",-1)),e("div",Nt,[i.status!==t(c).COMPLETED?(g(),w("a",{key:0,class:"dropdown-item",href:"javascript:void(0)",onClick:()=>E(i,t(c).COMPLETED)},"Close",8,At)):A("",!0),i.status!==t(c).RUNNING?(g(),w("a",{key:1,class:"dropdown-item",href:"javascript:void(0)",onClick:()=>E(i,t(c).RUNNING)},"Active",8,kt)):A("",!0),i.status!==t(c).SUSPENDED?(g(),w("a",{key:2,class:"dropdown-item",href:"javascript:void(0)",onClick:()=>E(i,t(c).SUSPENDED)},"Suspend",8,Mt)):A("",!0),e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:()=>p(i)},"Delete",8,It)])]),_:2},1032,["copy"]))),128))])]),e("div",xt,[e("div",Ht,[(g(!0),w(O,null,B(t(D),i=>(g(),F(m,{copy:i,key:i._id},{default:R(()=>[T[2]||(T[2]=e("button",{type:"button",class:"btn btn-outline-secondary w-100 mt-3 dropdown-toggle","data-bs-toggle":"dropdown"}," Action ",-1)),e("div",Ut,[i.status!==t(c).COMPLETED?(g(),w("a",{key:0,class:"dropdown-item",href:"javascript:void(0)",onClick:()=>E(i,t(c).COMPLETED)},"Close",8,jt)):A("",!0),i.status!==t(c).RUNNING?(g(),w("a",{key:1,class:"dropdown-item",href:"javascript:void(0)",onClick:()=>E(i,t(c).RUNNING)},"Active",8,Lt)):A("",!0),i.status!==t(c).SUSPENDED?(g(),w("a",{key:2,class:"dropdown-item",href:"javascript:void(0)",onClick:()=>E(i,t(c).SUSPENDED)},"Suspend",8,Ot)):A("",!0),e("a",{class:"dropdown-item",href:"javascript:void(0)",onClick:()=>p(i)},"Delete",8,Rt)])]),_:2},1032,["copy"]))),128))])])])]),N(a,{"is-open":t(u),status:t(n).status,title:t(n).title,message:t(n).message,onConfirm:t(n).onConfirm,onClose:T[0]||(T[0]=()=>y(!1))},null,8,["is-open","status","title","message","onConfirm"])],64)}}});export{zt as default};
